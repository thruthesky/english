<section id="reservation" class="part ">
    <div class="content-wrapper" style="padding-top: 0;">

<div class="text">
    <h1 class="fs-3rem text-center">나의 수업</h1>
   <div class="class-info">
        <div class="desc" *ngIf="share && share.class_info">
            <div><strong>첫 수업</strong>    : {{share.class_info?.first_class}}</div>
            <div><strong>예약된 수업</strong> : {{share.class_info?.no_of_reservation}}</div>
            <div><strong>다음 수업</strong>  : {{share.class_info?.next_class}}</div>
            <div><strong>지난 수업</strong> : {{share.class_info?.no_of_past}} </div>
        </div>
        <div class="pl-5 desc" *ngIf="share && !share.class_info">
            예약된 수업 정보가 없습니다.
            <ng-container *ngIf=" ! app.user.logged ">
                로그인을 하십시오.
            </ng-container>
        </div>
    </div>
</div>

        <div class="reservation-container p-relative ">
            <div class="date-container d-flex justify-content-between my-3">
                <div  class="btn btn-success h-100 p-relative prev-month" style="z-index:1; padding: .3rem .3rem;">
                    <div class="d-inline-block" (click)="onClickPrev();showPrevious= false"><span>{{ prevMonths[1]?.m}} {{ prevMonths[1]?.Y}}</span></div>
                    <span class="d-inline-block pointer show-list fs-15rem pl-1" (click)="showPrevious=!showPrevious">
                        <i *ngIf="showPrevious" class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                        <i *ngIf="!showPrevious" class="fa fa-arrow-circle-down" aria-hidden="true"></i>
                    </span>
                    <div  style="top:105%" class="p-absolute l-0 bg-success p-2 prev-months" *ngIf="showPrevious">
                        <ul class="list-menu">
                            <li class="prev w-100" style="padding: .3rem 0;" *ngFor="let prev of prevMonths | slice:2" (click)="selectNewDate({m:prev.m,Y:prev.Y}); showPrevious=!showPrevious"> {{ prev.m }} {{ prev.Y }}</li>
                        </ul>
                    </div>
                </div>

                <div style="z-index:1; padding: .3rem .3rem; "  class="btn btn-success h-100 p-relative this-month">
                    <div class="d-inline-block"><span>{{ prevMonths[0]?.m}} {{ prevMonths[0]?.Y}}</span></div>
                    <span class="d-inline-block pointer show-list fs-15rem pl-1" (click)="showYear=!showYear">
                        <i *ngIf="showYear" class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                        <i *ngIf="!showYear" class="fa fa-arrow-circle-down" aria-hidden="true"></i>
                    </span>
                    <div  style="top:105%" class="p-absolute l-0 bg-success p-2 this-months" *ngIf="showYear">
                        <ul class="list-menu">
                            <li class="this-year w-100" style="padding: .3rem 0;" *ngFor="let year of listOfYears" (click)="selectNewDate({m:year.m,Y:year.Y});showYear=!showYear"> {{ year.m }} {{ year.Y }}</li>
                        </ul>
                    </div>
                </div>
                <div style="z-index:1; padding: .3rem .3rem; "  class="btn btn-success h-100 p-relative next-month">
                    
                    <div class="d-inline-block" (click)="onClickNext()"><span>{{ nextMonths[0]?.m}} {{ nextMonths[0]?.Y}}</span></div>
                    <span class="d-inline-block pointer show-list fs-15rem pl-1" (click)="showNext=!showNext">
                        <i *ngIf="showNext" class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                        <i *ngIf="!showNext" class="fa fa-arrow-circle-down" aria-hidden="true"></i>
                    </span>
                    <div  style="top:105%" class="p-absolute l-0 bg-success p-2 next-months" *ngIf="showNext">
                        <ul class="list-menu">
                            <li class="next w-100" style="padding: .3rem 0;" *ngFor="let next of nextMonths | slice:1" (click)="selectNewDate({m:next.m,Y:next.Y});showNext=!showNext"> {{ next.m }} {{ next.Y }}</li>
                        </ul>
                    </div>
                </div>
            </div>

            <table class="schedule-table" width="100%">
                <thead class="text-white">
                    <th class="normal" *ngFor=" let d of app.DAYS; let i = index " [attr.day]=" i ">{{ d }}</th>
                </thead>
                <tbody>
                    <tr valign="top" *ngFor="let week of weeks">
                        <td *ngFor="let day of week; let i = index" [attr.day]=" i ">
                            <div *ngIf="day" class="info-container" [ngClass]="{ has: day.length, none: ! day.length }">
                                    <div class="date">{{day?.myDate}}</div>
                                <div>
                                    <div *ngFor="let info of day;">
                                        <div *ngIf="info?.icon" class="my-0 mx-auto w-3 h-3 rounded-circle teacher-icon" style="overflow:hidden" (click)="onClickClassInfo(info)" [innerHTML]="info?.icon" on-mouseover="info.display = true"
                                            on-mouseleave="info.display = false"></div>
                                        <div class="text-center teacher-nick">{{info?.teacher?.mb_nick}}</div>
                                        <div class="p-absolute p-2 bg-success  class-info" *ngIf="info?.display && info?.teacher">
                                            <div>
                                                <span>
                                                Teacher's Name: {{ info?.teacher?.mb_nick }}
                                                </span>

                                            </div>
                                            <div>
                                                <span>
                                                Date: {{ info?.date }}
                                            </span>
                                            </div>
                                            <div *ngIf="info?.book">
                                                <span>
                                                Book: {{ info?.book }}
                                            </span>
                                            </div>
                                            <div *ngIf="info?.rate_comment">
                                                <span>
                                                Teacher's Comment: {{ info?.rate_comment }}
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </td>
                    </tr>
                </tbody>
            </table>
            <!--<div *ngIf="!user.logged" class="mx-auto p-absolute d-block b-0 w-100 reminder-image"> <img class="d-block w-75 mx-auto " src="assets/img/reservation-banner.png">
                <div class="mx-auto p-absolute d-block text-center fs-170  reminder-text" style="width:40%; top:20%; left:40%">수업 시간표를 보시려면 로그인을 하세요.</div>
            </div>-->
            <div *ngIf="this.calendarLoad" class="calendar-loader">
                <div class="loader"><i class="fa fa-spinner fa-pulse"></i></div>
            </div>
        </div>
    </div>
</section>

